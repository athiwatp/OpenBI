<%- include header.html %>

<script>

function DashboardController($scope, $http) {
	
	// initialize
	$scope.dashboards = [];
	$http.get('/document-list').success(function(result) {
		$scope.dashboards = result;
	});
	
}

</script>

<div class='uk-container'>
	<ul class='title'>
		<li>
			<a href="#drawer" class="uk-icon-button uk-icon-navicon"
			   id='navicon' data-uk-offcanvas></a>
		</li>
		<li>
			<a href="/" class="uk-icon-button uk-icon-home"></a>
		</li>
		<li>
			<a href="" class="uk-icon-button uk-icon-refresh"
				onclick='location.reload()'></a>
		</li>
		<li>
			OpenBI
		</li>
		
		<li><a href="/">Home</a></li>
		<li><a href='#new-dashboard' data-uk-modal>New</a></li>
	</ul>
</div>

<div class="uk-container" ng-controller="DashboardController">
	<div class="uk-grid">
		<div class="uk-width-1-3" ng-repeat="d in dashboards">
			<a href="/document/{{d.id}}">
				<h1>{{ d.name }}</h1>
			</a>
		</div>
	</div>
</div>

<script>
function chooseFile() {
	$('[name=file]').click();
}

function theme(t) {
	$('[name=theme]').val(t);
}
</script>

<div id="new-dashboard" class="uk-modal">
	<div class="uk-modal-dialog">
		<a class="uk-modal-close uk-close"></a>
		<h2>New</h2>
		
		<form method="post" action="/document-create" 
			enctype="multipart/form-data" 
				class="uk-form" >
			
			<input type="text" name="name" placeholder="Title" autofocus
					class="uk-width-1-1" />
			
			<h3>Layout</h3>
			<div data-uk-button-radio>
				<a href="javascript:theme('Light')" class="uk-button">
					Light
				</a>

				<a href="javascript:theme('Dark')" class="uk-button">
					Dark
				</a>
				
			</div>

			<h3>Data Upload</h3>
			<a href="javascript:chooseFile()" class="uk-button">
				Choose File
			</a>
			
			<input type="hidden" name="layout" value='Light' />
			<input type="file" name="file"  style="display:none;" />
			
			<hr/>
			<input type="submit" value="Create" 
				   class="uk-button uk-button-primary" />
		</form>
		
	</div>
</div>

<%- include drawer.html %>
<%- include footer.html %>
