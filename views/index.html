<%- include header.html %>

<script>

function Controller($scope, $http) {
	
	// initialize
	$scope.dashboards = [];
	$http.get('/dashboard-list').success(function(result) {
		$scope.dashboards = result;
	});
	
}

</script>

<div class='uk-container'>
	<ul class='title'>
		<li>
			<a href="#drawer" class="uk-icon-button uk-icon-navicon"
			   id='navicon' data-uk-offcanvas></a>
		</li>
		<li>
			<a href="" class="uk-icon-button uk-icon-refresh"
				onclick='location.reload()'></a>
		</li>
		<li>
			OpenBI
		</li>
		
		<li><a href="/">Home</a></li>
		<li><a href='#new-dashboard' data-uk-modal>New Dashboard</a></li>
	</ul>
</div>

<div class="uk-container" ng-controller="Controller">
	<div class="uk-grid">
		<div class="uk-width-1-3" ng-repeat="d in dashboards">
			<h1>{{ d.name }}</h1>
		</div>
	</div>
</div>

<script>
function upload() {
	$('[name=file]').click();
}

function layout(l) {
	$('[name=layout]').val(l);
}
</script>

<div id="new-dashboard" class="uk-modal">
	<div class="uk-modal-dialog">
		<a class="uk-modal-close uk-close"></a>
		<h2>Dashboard</h2>
		
		<form method="post" action="/dashboard-create" enctype="multipart/form-data" 
				class="uk-form" >
			
			<fieldset data-uk-margin>
			<input type="text" name="name" placeholder="Title" />
			</fieldset>
			
			<h3>Layout</h3>
			<div data-uk-button-radio>
				<a href="javascript:layout('layout-1')" class="uk-button">
					Layout 1
				</a>

				<a href="javascript:layout('layout-2')" class="uk-button">
					Layout 2
				</a>
				
				<a href="javascript:layout('layout-3')" class="uk-button">
					Layout 3
				</a>
			</div>

			<h3>Data Upload</h3>
			<a href="javascript:upload()" class="uk-button">
				Data
			</a>
			
			<input type="hidden" name="layout" value="layout-1" />
			<input type="file" name="file"  style="display:none;" />
			
			<input type="submit" value="Create" 
				   class="uk-button uk-button-primary" />
		</form>
		
	</div>
</div>

<%- include drawer.html %>
<%- include footer.html %>
